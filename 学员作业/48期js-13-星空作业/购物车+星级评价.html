<!doctype html>
<!--文档类型:html文档(html5标准模式)-->
<!--注释:是给开发人员看的-->
<html lang='en'>
<!--html跟标签 lang意思是翻译成英文-->

<head>
    <!--网页的头部-->
    <meta charset='utf-8' />
    <!--meta是单标签,单标签在后面括号前加/,以表示闭合,charset是设置字符编码的,utf-8是国际编译代码-->
    <meta name='generator' content='EditPlus®' />
    <!--generator意思是使用的编译软件,content后面是编译软件名字-->
    <meta name='author' content='星空' />
    <!--author这是网站作者的意思-->
    <meta name='keywords' content='潭州教育48期,阿飞老师,00作业' />
    <!--网页三要素之一,这是网页的关键词,给搜索引擎搜索你的网页用的,-->
    <meta name='description' content='梗概,简介,' />
    <!--网页三要素之一,这是对自己的网页的一些简介.-->
    <title>Document</title>
    <!--网页三要素之一,标题,这是在网页最上面的名词-->
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
        }

        #bigbox {
            width: 850px;
            margin: 50px auto;  
            user-select: none; 
        }
        #box{
            display: flex;
            width: 100%;
            text-align: center;
            flex: 1;
        }
        #box dl {
            width: 100%;
        }
        #box dt {
            width: 100%;
            height: 50px;
            background-color: #d90060;
            border: 1px solid #d90060;
            font-size: 20px;
            color: #fff;
            line-height: 40px;
        }

        #box dd {
            width: 100%;
            height: 85px;
            border: 1px solid #d90060;
            line-height: 85px;
        }
        #box dd input{
            width: 30%;
        }
        #box dd button{
            width: 10%;
            font-size: 15px;
            font-weight: bold;
        }
        #cheque{
            width: 95.5%;
            height: 50px;
            margin-top: 10px;
            padding: 0 20px;
            background-color: #d90060;
            font-size: 20px;
            line-height: 50px;
            text-align: right;
            color: #fff;
        }
        #cheque > p > span{
            margin: 0 10px;
        }
        #cheque > p > span span{
            color: yellow;
        }

        #star ul li{
            float: left;
            width: 10px;
            height: 10px;
            margin: 5px 3px;
            border-radius: 50%;
            border: 1px solid red;
        }
        #star ul li.on{
            background-color: red;
        }
        #star span{
            display: inline-block;
            width: 80px;
            height: 50px;
            margin-left: 10px;
            border: 1px solid #000;
        }
    </style>
</head>

<body>
    <!--网页的身体,里面的内容是给浏览者观看得到的东西-->
    <div id="bigbox">
        <div id="box">
            <dl class='shop'>
                <dt>商品</dt>
                <dd>图片</dd>
                <dd>图片</dd>
                <dd>图片</dd>
                <dd>图片</dd>
            </dl>
            <dl class='price'>
                <dt>单价</dt>
                <dd>8</dd>
                <dd>30</dd>
                <dd>58</dd>
                <dd>72</dd>
            </dl>
            <dl class='number'>
                <dt>数量</dt>
                <dd>
                    <button class='reduce'> - </button>
                    <input type="text" placeholder="0">
                    <button class="add"> + </button>
                </dd>
                <dd>
                    <button class='reduce'> - </button>
                    <input type="text" placeholder="0">
                    <button class="add"> + </button>
                </dd>
                <dd>
                    <button class='reduce'> - </button>
                    <input type="text" placeholder="0">
                    <button class="add"> + </button>
                </dd>
                <dd>
                    <button class='reduce'> - </button>
                    <input type="text" placeholder="0">
                    <button class="add"> + </button>
                </dd>
            </dl>
            <dl class="total">
                <dt>小计</dt>
                <dd><span>0</span>元</dd>
                <dd><span>0</span>元</dd>
                <dd><span>0</span>元</dd>
                <dd><span>0</span>元</dd>
            </dl>
        </div>
        <div id="cheque">
            <p>
                <span>
                    已选择商品
                    <span id='num'>0</span>
                    个
                </span>
                <span>
                    合计费用￥
                    <span id='cost'>0</span>
                    元
                </span>
            </p>
        </div>
        <div id="star">
            <p>请你评价</p>
            <ul>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
            <span></span>
        </div>
    </div>
    <script>
        let oDl = document.getElementsByTagName('dl'),
            aPrice = oDl[1].getElementsByTagName('dd'),
            aInput = oDl[2].getElementsByTagName('input'),
            oReduce = document.getElementsByClassName('reduce'),
            oAdd = document.getElementsByClassName('add'),
            aTotal = oDl[3].getElementsByTagName('span'),
            oNum = document.getElementById('num'),
            oCost = document.getElementById('cost'),
            arr = ['差评', '不推荐', '一般', '好评', '力荐'],
            oLi = document.getElementsByTagName('li'),
            oDiv = document.getElementById('star'),
            oEvaluate = oDiv.getElementsByTagName('span')[0],
            len = aInput.length,
            // mark = true,
            lent = oLi.length,
			idx = 0;

        for (let i = 0; i < len; i++) {
            oReduce[i].onclick = function () {
                let val = aInput[i].value,
                    pic = aPrice[i].innerText;
                val <= 0 ? val = 0 : val--
                aInput[i].value = val
                aTotal[i].innerText = `${val * pic}`
                // let num = 0,
                //     cost = 0;
                // for (let j = 0; j < len; j++) {
                // cost += aTotal[j].innerText*1
                // num += aInput[j].value * 1
                // }
                // oNum.innerHTML = num
                // oCost.innerHTML = cost
                heji()
            }
            oAdd[i].onclick = function () {
                let val = aInput[i].value,
                    pic = aPrice[i].innerText
                val++
                aInput[i].value = val
                aTotal[i].innerText = `${val * pic}`
                heji()
            }
            aInput[i].oninput = function () {
                let val = aInput[i].value,
                    pic = aPrice[i].innerText
                aInput[i].value = val
                aTotal[i].innerText = `${val * pic}`
                heji()
            }
        }

        // 这是给下面选择了多少商品需要计算的地方
        function heji() {
            let num = 0, // 每次调用这个函数的时候 都会让num清0
                cost = 0; // 每次调用这个函数的时候 都会让cost清0
            for (let j = 0; j < len; j++) {
                cost += aTotal[j].innerText * 1 // 在循环里 aTotal[j].innerText对应了不同的值,但是这个值为string类型的,所以*1让他强制变成number类型来运算, 把每项里的值拿来相加
                num += aInput[j].value * 1    // 意思与上面的一样
            }
            oNum.innerHTML = num // 在循环体外再把这个值赋值给相应的地方
            oCost.innerHTML = cost // 在循环体外再把这个值赋值给相应的地方
        }

        // 星星评价

        for (let k = 0; k < lent; k++) {
            oLi[k].onmouseenter = function () {
                if (k >= idx) {
                    for (let z = k; z >= 0; z--) {
                        oLi[z].className = 'on'
                    }
                    oEvaluate.innerText = `${arr[k]}`
                }
            }

            oLi[k].onmouseleave = function () {
                if (k>idx) {
                    for (let z = k; z >= 0; z--) {
                        oLi[z].className = ''
                    }
                    oEvaluate.innerText = ''
                }
            }

            oLi[k].onclick = function () {
                for (let i = 0; i < lent; i++) {
                    oLi[i].className = ''
                }
                for (let z = k; z >= 0; z--) {
                    oLi[z].className = 'on'
                }
                oEvaluate.innerText = `${arr[k]}`

                // console.log(mark)
                // mark = false
				idx = k
            }
        }
    </script>
</body>

</html>
<!--这就是网页的基本样式-->